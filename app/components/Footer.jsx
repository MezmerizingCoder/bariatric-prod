import {useMatches, NavLink} from '@remix-run/react';
import { Image } from '@shopify/hydrogen';
import { NewsletterForm } from './NewsletterForm';
import { BoxedSection } from './BoxedSection';

export function Footer({menu}) {
  return (
    <footer className="footer">
      {/* <FooterMenu menu={menu} /> */}
      <BoxedSection>
      <div className='footer-grid-section'>
        <div className='footer-item-container'>
          <div>
            <img
              className='logo'
              src={require('../../public/dignex-logo.png')}
            />
            <p>Copyright Â© 2023 BRIX Templates | All Rights Reserved </p>
          </div>
        </div>
        <div className='footer-item-container'>
          <div>
            <h3>Subscribe to our newsletter</h3>
            <NewsletterForm />
          </div>
        </div>
        <div className='footer-item-container'>
          <div>
            <h3>Follow Us</h3>
            <div className='flex-section'>
              <button className='social-button'>
                <svg width="10" height="19" viewBox="0 0 10 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.46378 18.0127V9.80206H9.35847L9.79186 6.6022H6.4637V4.55923C6.4637 3.63279 6.73387 3.00148 8.12932 3.00148L9.90901 3.00069V0.138767C9.6012 0.0998413 8.54468 0.0126953 7.3157 0.0126953C4.74968 0.0126953 2.99294 1.50387 2.99294 4.24242V6.6022H0.0908203V9.80206H2.99294V18.0126H6.46378V18.0127Z" fill="#8D8BA7"/>
                </svg>
              </button>
              <button className='social-button'>
                <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.0271 0.713935V0.710693H12.8711L13.1794 0.772285C13.385 0.812271 13.5717 0.864673 13.7394 0.929507C13.9071 0.994341 14.0694 1.06999 14.2263 1.15642C14.3832 1.24286 14.5255 1.33094 14.6532 1.42062C14.7798 1.50923 14.8934 1.60324 14.9941 1.70265C15.0936 1.80314 15.2489 1.82907 15.4599 1.78045C15.6709 1.73182 15.8981 1.66428 16.1416 1.57784C16.385 1.4914 16.6258 1.39415 16.8638 1.28609C17.1019 1.17803 17.2469 1.10942 17.2988 1.08025C17.3497 1.05 17.3768 1.03379 17.38 1.03162L17.3832 1.02676L17.3995 1.01865L17.4157 1.01055L17.4319 1.00244L17.4482 0.994341L17.4514 0.989478L17.4563 0.986236L17.4612 0.982995L17.4644 0.978132L17.4806 0.97327L17.4968 0.970028L17.4936 0.994341L17.4887 1.01865L17.4806 1.04297L17.4725 1.06728L17.4644 1.08349L17.4563 1.0997L17.4482 1.12401C17.4427 1.14022 17.4373 1.16182 17.4319 1.18884C17.4265 1.21586 17.3751 1.32391 17.2777 1.51301C17.1803 1.70211 17.0586 1.89391 16.9125 2.08841C16.7665 2.28291 16.6355 2.42985 16.5198 2.52928C16.4029 2.62977 16.3255 2.7 16.2876 2.73999C16.2498 2.78104 16.2038 2.81886 16.1497 2.85344L16.0685 2.90693L16.0523 2.91504L16.0361 2.92314L16.0328 2.928L16.028 2.93125L16.0231 2.93449L16.0198 2.93935L16.0036 2.94745L15.9874 2.95556L15.9841 2.96042L15.9793 2.96366L15.9744 2.9669L15.9711 2.97177L15.9679 2.97663L15.963 2.97987L15.9582 2.98311L15.9549 2.98797H16.0361L16.4905 2.89072C16.7935 2.82589 17.083 2.74756 17.3589 2.6557L17.7971 2.50983L17.8458 2.49362L17.8702 2.48551L17.8864 2.47741L17.9026 2.46931L17.9188 2.4612L17.9351 2.4531L17.9675 2.44823L18 2.44499V2.47741L17.9919 2.48065L17.9838 2.48551L17.9805 2.49038L17.9757 2.49362L17.9708 2.49686L17.9675 2.50172L17.9643 2.50659L17.9594 2.50983L17.9546 2.51307L17.9513 2.51793L17.9481 2.52279L17.9432 2.52604L17.9351 2.54224L17.927 2.55845L17.9221 2.56169C17.9199 2.56494 17.8512 2.65677 17.716 2.83724C17.5807 3.01877 17.5077 3.11061 17.4968 3.11278C17.486 3.11602 17.4709 3.13223 17.4514 3.1614C17.433 3.19165 17.3183 3.31214 17.1073 3.52285C16.8963 3.73356 16.6897 3.92103 16.4873 4.08528C16.2839 4.25061 16.1811 4.45375 16.1789 4.69472C16.1757 4.9346 16.1632 5.20584 16.1416 5.50838C16.1199 5.81094 16.0794 6.1378 16.0198 6.48899C15.9603 6.84018 15.8684 7.23728 15.7439 7.68031C15.6195 8.12333 15.468 8.55556 15.2894 8.97698C15.1109 9.3984 14.9243 9.77659 14.7295 10.1116C14.5347 10.4465 14.3562 10.7302 14.1939 10.9625C14.0316 11.1948 13.8666 11.4136 13.6988 11.619C13.5311 11.8243 13.319 12.0555 13.0626 12.3127C12.8051 12.5688 12.6644 12.7092 12.6406 12.7341C12.6157 12.7579 12.5097 12.8465 12.3225 12.9999C12.1363 13.1544 11.9362 13.3089 11.7219 13.4635C11.5088 13.6169 11.3129 13.745 11.1344 13.8476C10.9558 13.9503 10.7405 14.0675 10.4884 14.1993C10.2373 14.3322 9.96573 14.4554 9.67358 14.5689C9.38142 14.6823 9.07304 14.7877 8.74842 14.8849C8.42381 14.9822 8.11001 15.0578 7.80703 15.1119C7.50407 15.1659 7.16051 15.2118 6.77637 15.2496L6.20018 15.3064V15.3145H5.14518V15.3064L5.00721 15.2983C4.91525 15.2929 4.8395 15.2874 4.77998 15.2821C4.72048 15.2767 4.49594 15.2469 4.1064 15.1929C3.71686 15.1389 3.41119 15.0848 3.18936 15.0308C2.96755 14.9768 2.63751 14.8741 2.19928 14.7229C1.76105 14.5716 1.38611 14.4187 1.07448 14.2642C0.763937 14.1107 0.569167 14.0135 0.490171 13.9724C0.412263 13.9324 0.324617 13.8827 0.227232 13.8233L0.0811542 13.7341L0.0779243 13.7293L0.0730388 13.726L0.0681695 13.7228L0.0649234 13.7179L0.0486925 13.7098L0.0324617 13.7017L0.0292317 13.6969L0.0243463 13.6936L0.019477 13.6904L0.0162308 13.6855L0.0130009 13.6807L0.00811542 13.6774H0V13.645L0.0162308 13.6482L0.0324617 13.6531L0.1055 13.6612C0.154193 13.6666 0.28675 13.6747 0.503156 13.6855C0.719578 13.6963 0.949504 13.6963 1.19297 13.6855C1.43643 13.6747 1.68531 13.6504 1.93959 13.6126C2.19387 13.5748 2.49414 13.5099 2.8404 13.4181C3.18667 13.3262 3.50479 13.2171 3.79479 13.0907C4.08369 12.9632 4.28927 12.8681 4.41156 12.8054C4.53274 12.7438 4.71777 12.6293 4.96664 12.4618L5.33995 12.2106L5.34319 12.2057L5.34806 12.2025L5.35295 12.1992L5.35618 12.1944L5.35942 12.1895L5.36429 12.1862L5.36918 12.183L5.37241 12.1781L5.38864 12.1733L5.40487 12.17L5.40812 12.1538L5.41298 12.1376L5.41787 12.1344L5.4211 12.1295L5.29125 12.1214C5.20469 12.116 5.12083 12.1106 5.03968 12.1052C4.95852 12.0998 4.83139 12.0755 4.65825 12.0323C4.48513 11.989 4.29848 11.9242 4.09829 11.8378C3.89811 11.7513 3.70334 11.6487 3.51398 11.5298C3.32463 11.4109 3.18774 11.3121 3.10334 11.2332C3.02002 11.1554 2.91181 11.0452 2.77872 10.9025C2.64671 10.7588 2.53201 10.6113 2.43463 10.4601C2.33724 10.3088 2.24419 10.1342 2.15547 9.93652L2.02074 9.64153L2.01262 9.61721L2.00451 9.5929L1.99964 9.57669L1.99639 9.56048L2.02074 9.56373L2.04509 9.56859L2.22362 9.5929C2.34266 9.60911 2.52932 9.61451 2.78359 9.60911C3.03788 9.60371 3.21371 9.5929 3.31109 9.57669C3.40848 9.56048 3.46799 9.54967 3.48963 9.54428L3.52209 9.53617L3.56267 9.52807L3.60325 9.51996L3.60649 9.5151L3.61136 9.51186L3.61625 9.50862L3.61948 9.50375L3.58702 9.49565L3.55455 9.48755L3.52209 9.47944L3.48963 9.47134L3.45717 9.46323C3.43553 9.45784 3.39767 9.44703 3.34355 9.43082C3.28946 9.41461 3.14338 9.35517 2.90532 9.25252C2.66728 9.14988 2.47791 9.04992 2.33724 8.95267C2.19622 8.85514 2.06176 8.74847 1.93472 8.63336C1.80812 8.51666 1.66908 8.36646 1.51758 8.18277C1.3661 7.99908 1.23085 7.78566 1.11181 7.54254C0.992792 7.29941 0.903522 7.0671 0.844004 6.84558C0.784724 6.62536 0.745615 6.40022 0.727158 6.17293L0.697926 5.83255L0.714157 5.83579L0.730388 5.84065L0.746619 5.84876L0.762849 5.85686L0.77908 5.86497L0.795311 5.87307L1.04689 5.98653C1.21462 6.06217 1.42291 6.12701 1.67178 6.18103C1.92066 6.23505 2.06943 6.26478 2.11812 6.27018L2.19116 6.27828H2.33724L2.33401 6.27342L2.32913 6.27018L2.32426 6.26694L2.32101 6.26207L2.31778 6.25721L2.31289 6.25397L2.30803 6.25073L2.30478 6.24586L2.28855 6.23776L2.27232 6.22966L2.26909 6.22479L2.2642 6.22155L2.25933 6.21831L2.25609 6.21345L2.23986 6.20534L2.22362 6.19724L2.22039 6.19238C2.21715 6.19021 2.17061 6.15563 2.08079 6.08864C1.99206 6.02057 1.89901 5.93251 1.80162 5.82445C1.70424 5.71638 1.60685 5.60293 1.50947 5.48407C1.4119 5.36494 1.32501 5.23749 1.24977 5.10317C1.17404 4.96811 1.09396 4.79628 1.00956 4.58774C0.926245 4.38028 0.862945 4.17119 0.819657 3.96048C0.776386 3.74977 0.75204 3.54177 0.746619 3.33646C0.741214 3.13114 0.746619 2.95556 0.762849 2.80968C0.77908 2.66381 0.811542 2.49902 0.860234 2.31533C0.908927 2.13164 0.979271 1.93713 1.07124 1.73182L1.2092 1.42386L1.21731 1.39955L1.22543 1.37524L1.23031 1.372L1.23354 1.36713L1.23679 1.36227L1.24166 1.35903L1.24654 1.36227L1.24977 1.36713L1.25302 1.372L1.25789 1.37524L1.26278 1.37848L1.26601 1.38334L1.26925 1.3882L1.27412 1.39145L1.28224 1.40765L1.29035 1.42386L1.29524 1.42711L1.29847 1.43197L1.51758 1.67509C1.66366 1.83718 1.8368 2.01818 2.03697 2.21808C2.23716 2.41797 2.34807 2.52171 2.3697 2.52928C2.39135 2.53792 2.41839 2.56276 2.45086 2.60384C2.48332 2.64382 2.59153 2.73945 2.77547 2.89072C2.95943 3.042 3.20019 3.2176 3.49775 3.4175C3.79532 3.6174 4.12534 3.8146 4.48783 4.0091C4.85033 4.20361 5.23987 4.37919 5.65645 4.53588C6.07304 4.69256 6.3652 4.79521 6.53291 4.84384C6.70064 4.89246 6.98738 4.95459 7.39315 5.03023C7.79892 5.10588 8.10461 5.1545 8.31019 5.17611C8.51579 5.19772 8.65646 5.21015 8.73219 5.21339L8.84581 5.21663L8.84258 5.19232L8.83769 5.16801L8.80523 4.9654C8.78359 4.83034 8.77277 4.64123 8.77277 4.39811C8.77277 4.15498 8.79171 3.93077 8.82958 3.72546C8.86746 3.52015 8.92427 3.31214 9 3.10143C9.07575 2.89072 9.14988 2.72161 9.22236 2.59411C9.29595 2.46768 9.39225 2.32343 9.51127 2.16135C9.63031 1.99926 9.7845 1.83178 9.97385 1.65889C10.1632 1.48599 10.3796 1.33201 10.6231 1.19695C10.8665 1.06188 11.0911 0.959217 11.2967 0.888986C11.5023 0.818755 11.6754 0.77282 11.8161 0.751214C11.9567 0.729609 12.0271 0.717177 12.0271 0.713935Z" fill="#8D8BA7"/>
                </svg>
              </button>
              <button className='social-button'>
                <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M0 9.0127C0 5.41756 0 3.61999 0.856692 2.32525C1.23925 1.74708 1.73439 1.25194 2.31255 0.869387C3.60729 0.0126953 5.40486 0.0126953 9 0.0126953C12.5951 0.0126953 14.3927 0.0126953 15.6874 0.869387C16.2656 1.25194 16.7608 1.74708 17.1433 2.32525C18 3.61999 18 5.41756 18 9.0127C18 12.6078 18 14.4054 17.1433 15.7001C16.7608 16.2783 16.2656 16.7734 15.6874 17.156C14.3927 18.0127 12.5951 18.0127 9 18.0127C5.40486 18.0127 3.60729 18.0127 2.31255 17.156C1.73439 16.7734 1.23925 16.2783 0.856692 15.7001C0 14.4054 0 12.6078 0 9.0127ZM13.6593 9.01292C13.6593 11.5862 11.5732 13.6723 8.99984 13.6723C6.42652 13.6723 4.34043 11.5862 4.34043 9.01292C4.34043 6.4396 6.42652 4.35351 8.99984 4.35351C11.5732 4.35351 13.6593 6.4396 13.6593 9.01292ZM8.99984 12.0959C10.7025 12.0959 12.0828 10.7156 12.0828 9.01292C12.0828 7.31023 10.7025 5.92992 8.99984 5.92992C7.29714 5.92992 5.91684 7.31023 5.91684 9.01292C5.91684 10.7156 7.29714 12.0959 8.99984 12.0959ZM13.8433 5.21424C14.4479 5.21424 14.9381 4.72407 14.9381 4.11942C14.9381 3.51477 14.4479 3.0246 13.8433 3.0246C13.2386 3.0246 12.7485 3.51477 12.7485 4.11942C12.7485 4.72407 13.2386 5.21424 13.8433 5.21424Z" fill="#8D8BA7"/>
                </svg>
              </button>
              <button className='social-button'>
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 2.4325C0 1.85529 0.202708 1.3791 0.608108 1.00393C1.01351 0.628746 1.54055 0.441162 2.18919 0.441162C2.82626 0.441162 3.34169 0.625855 3.73552 0.995274C4.14092 1.37623 4.34363 1.87261 4.34363 2.48445C4.34363 3.03856 4.14672 3.50031 3.7529 3.86973C3.3475 4.25068 2.81467 4.44116 2.15444 4.44116H2.13707C1.49999 4.44116 0.984562 4.25068 0.590734 3.86973C0.196905 3.48878 0 3.0097 0 2.4325ZM0.225869 17.584V6.01692H4.08301V17.584H0.225869ZM6.22008 17.584H10.0772V11.1251C10.0772 10.7211 10.1236 10.4094 10.2162 10.1901C10.3784 9.79757 10.6245 9.46568 10.9546 9.19441C11.2847 8.92312 11.6988 8.78748 12.1969 8.78748C13.4942 8.78748 14.1429 9.65905 14.1429 11.4022V17.584H18V10.952C18 9.24346 17.5946 7.94765 16.7838 7.06454C15.973 6.18142 14.9015 5.73986 13.5695 5.73986C12.0753 5.73986 10.9112 6.38055 10.0772 7.66194V7.69657H10.0598L10.0772 7.66194V6.01692H6.22008C6.24324 6.38632 6.25483 7.53494 6.25483 9.4628C6.25483 11.3906 6.24324 14.0977 6.22008 17.584Z" fill="#8D8BA7"/>
                </svg>
              </button>
              <button className='social-button'>
                <svg width="20" height="15" viewBox="0 0 20 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.4388 13.9929L6.37656 13.9169C5.06131 13.8905 3.74279 13.9433 2.45333 13.6692C0.491769 13.2597 0.352805 11.2518 0.207394 9.56756C0.00703181 7.19972 0.084598 4.7889 0.462707 2.44083C0.676162 1.12331 1.51619 0.337137 2.81527 0.251587C7.20063 -0.0588878 11.6151 -0.0220933 15.9908 0.122754C16.4529 0.136033 16.9182 0.208609 17.3739 0.29122C19.6232 0.694138 19.678 2.96953 19.8238 4.88499C19.9692 6.82021 19.9078 8.76537 19.6299 10.6874C19.4069 12.2788 18.9803 13.6134 17.1799 13.7422C14.9242 13.9107 12.7202 14.0463 10.4581 14.0031C10.4582 13.9929 10.4452 13.9929 10.4388 13.9929ZM8.05058 9.96389C9.75048 8.96648 11.418 7.98569 13.1081 6.99496C11.4051 5.99755 9.74076 5.01676 8.05058 4.02604V9.96389Z" fill="#8D8BA7"/>
                </svg>

              </button>
            </div>
          </div>
        </div>
      </div>
      </BoxedSection>
    </footer>
  );
}

function FooterMenu({menu}) {
  const [root] = useMatches();
  const publicStoreDomain = root?.data?.publicStoreDomain;
  return (
    <nav className="footer-menu" role="navigation">
      {(menu || FALLBACK_FOOTER_MENU).items.map((item) => {
        if (!item.url) return null;
        // if the url is internal, we strip the domain
        const url =
          item.url.includes('myshopify.com') ||
          item.url.includes(publicStoreDomain)
            ? new URL(item.url).pathname
            : item.url;
        const isExternal = !url.startsWith('/');
        return isExternal ? (
          <a href={url} key={item.id} rel="noopener noreferrer" target="_blank">
            {item.title}
          </a>
        ) : (
          <NavLink
            end
            key={item.id}
            prefetch="intent"
            style={activeLinkStyle}
            to={url}
          >
            {item.title}
          </NavLink>
        );
      })}
    </nav>
  );
}

const FALLBACK_FOOTER_MENU = {
  id: 'gid://shopify/Menu/199655620664',
  items: [
    {
      id: 'gid://shopify/MenuItem/461633060920',
      resourceId: 'gid://shopify/ShopPolicy/23358046264',
      tags: [],
      title: 'Privacy Policy',
      type: 'SHOP_POLICY',
      url: '/policies/privacy-policy',
      items: [],
    },
    {
      id: 'gid://shopify/MenuItem/461633093688',
      resourceId: 'gid://shopify/ShopPolicy/23358013496',
      tags: [],
      title: 'Refund Policy',
      type: 'SHOP_POLICY',
      url: '/policies/refund-policy',
      items: [],
    },
    {
      id: 'gid://shopify/MenuItem/461633126456',
      resourceId: 'gid://shopify/ShopPolicy/23358111800',
      tags: [],
      title: 'Shipping Policy',
      type: 'SHOP_POLICY',
      url: '/policies/shipping-policy',
      items: [],
    },
    {
      id: 'gid://shopify/MenuItem/461633159224',
      resourceId: 'gid://shopify/ShopPolicy/23358079032',
      tags: [],
      title: 'Terms of Service',
      type: 'SHOP_POLICY',
      url: '/policies/terms-of-service',
      items: [],
    },
  ],
};

function activeLinkStyle({isActive, isPending}) {
  return {
    fontWeight: isActive ? 'bold' : undefined,
    color: isPending ? 'grey' : 'var(--primary-font-color)',
  };
}
